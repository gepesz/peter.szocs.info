/**
 * Website - Source of http://peter.szocs.info
 * @version v1.0.0
 * @license Apache License 2.0
 */
var app=angular.module("app",["ngMessages","ui.router","firebase"]).constant("FIREBASE_URL","https://peter-szocs-info.firebaseio.com/");app.config(["$stateProvider","$urlRouterProvider","$locationProvider","$sceDelegateProvider",function(e,t,o,n){t.otherwise("/404.html"),e.state("home",{url:"/",views:{about:{controller:"MainCtrl",templateUrl:"partials/about.html"},portfolio:{controller:"GitHubCtrl",templateUrl:"partials/portfolio.html"},music:{controller:"MainCtrl",templateUrl:"partials/music.html"},contact:{controller:"MainCtrl",templateUrl:"partials/contact.html"}}}),o.html5Mode(!0),o.hashPrefix("!"),n.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}]),app.controller("MainCtrl",["$scope","$http","$firebaseArray","FIREBASE_URL",function(e,t,o,n){var r=new Firebase(n+"/achievements");e.achievements=o(r);var a=new Firebase(n+"/songs");e.songs=o(a),e.sendEmail=function(o){t({method:"POST",url:"/mail/contact.php",data:$.param(o),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){if(t.success)e.contactFormModalTitle="Success",e.contactFormModalBody="Your message has been sent.";else{var n=o.name;n.indexOf(" ")>=0&&(n=n.split(" ").slice(0,-1).join(" ")),e.contactFormModalTitle="Oops ...",e.contactFormModalBody="Sorry "+n+", it seems that my mail server is not responding.  Please try again later!"}e.contactForm.$setPristine(),e.contactForm.$setUntouched(),e.formData={},$("#contactFormModal").modal("show")})}}]),app.controller("GitHubCtrl",["$scope","$http","GitHubSvc",function(e,t,o){o.getReleases().then(function(t){e.repos=t}),e.showRepo=function(t){e.selectedRepo=t,$("#portfolioModal").modal("show")}}]),app.factory("GitHubSvc",["$q","$http",function(e,t){function o(o){var n=e.defer();return t.get(o).then(function(e){n.resolve(e.data)}),n.promise}function n(e){return o(l+"repos/"+c+"/"+e+"/releases")}function r(e){return o(l+"repos/"+c+"/"+e+"/license")}function a(e){return o(l+"repos/"+c+"/"+e)}function s(){return o(l+"users/"+c+"/repos")}function i(){var t=e.defer(),o=[];return s().then(function(e){e.map(function(e){e.homepage&&n(e.name).then(function(t){t.map(function(t){var n=t.body.indexOf("(https")+1,r=t.body.substring(n);n=r.indexOf(".png)")+4,r=r.substring(0,n),n=t.body.indexOf("\r\n")+2;var a=t.body.substring(n);o.push({name:e.name,description:e.description,html_url:e.html_url,homepage:e.homepage,screenshot:r,body:a,date:t.created_at.slice(0,10)})})}).then(r(e.name).then(function(e){o[o.length-1].licenseName=e.license.name,o[o.length-1].licenseUrl=e.license.url,t.resolve(o)}))})}),t.promise}var l="https://api.github.com/",c="gepesz";return{getRepoReleases:n,getRepoLicense:r,getRepo:a,getRepos:s,getReleases:i}}]),$(function(){$(".navbar-collapse ul li a").click(function(){$(".navbar-toggle:visible").click()}),$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})});var animatedHeader={didScroll:!1,changeHeaderOn:300,scrollPage:function(){$(window).scrollTop()>=this.changeHeaderOn?$(".navbar-default").addClass("navbar-shrink"):$(".navbar-default").removeClass("navbar-shrink"),this.didScroll=!1}};$(window).on("scroll",function(e){animatedHeader.didScroll||(animatedHeader.didScroll=!0,setTimeout(animatedHeader.scrollPage(),200))});